<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nh·∫Øn g·ª≠i y√™u th∆∞∆°ng</title>
  <style>
    :root{
      --pink:#ffd9e6; --hot:#ff6b9e; --dark:#333; --card:#fff6fa; --heart:#ff7aa2; --accent:#ffa94d;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";background:var(--pink);color:var(--dark)}
    .wrap{min-height:100svh;display:grid;place-items:center;padding:18px}
    .card{width:min(520px,92vw);background:var(--card);border-radius:24px;box-shadow:0 8px 30px rgba(0,0,0,.08);padding:20px 18px;position:relative;overflow:hidden}
    h1{font-size:1.4rem;margin:0 0 10px;letter-spacing:.2px}
    .muted{opacity:.7;font-size:.9rem}
    input[type="password"], input[type="text"]{width:100%;padding:14px 16px;border:1.5px solid #ffd0df;border-radius:14px;font-size:1rem;outline:none;background:#fff}
    .btn{margin-top:14px;display:inline-flex;gap:.5rem;align-items:center;padding:12px 18px;border:none;border-radius:14px;background:var(--heart);color:#fff;font-weight:600;cursor:pointer;box-shadow:0 6px 16px rgba(255,122,162,.35);transition:transform .06s}
    .btn:active{transform:translateY(1px)}

    /* step containers */
    .step{display:none}
    .step.active{display:grid;place-items:center}

    /* Bee scene (gi·ªù ch·ªâ l√†m n·ªÅn) */
    .scene{position:relative;width:min(520px,92vw);height:60vh;max-height:520px;background:var(--pink);}
    .sun{position:absolute;right:18px;top:18px;width:96px;height:96px;background:radial-gradient(circle at 35% 35%, #ffe899 0 45%, #ffd34d 46% 100%);border-radius:50%;box-shadow:0 0 0 12px rgba(255,211,77,.35);display:grid;place-items:center;font-weight:700}

    /* Envelope */
    .envelope{position:absolute;inset:0;display:grid;place-items:center;opacity:0;pointer-events:none;transition:opacity .6s ease .4s}
    .envelope.show{opacity:1;pointer-events:auto}
    .env{width:240px;height:180px;position:relative}
    .env .body{position:absolute;inset:0;background:#ffe5ec;border-radius:12px 12px 16px 16px;box-shadow:0 10px 20px rgba(0,0,0,.12) inset}
    .env .flap{position:absolute;left:0;right:0;top:0;height:50%;background:linear-gradient(#ffc8dd,#ffb3c6);clip-path:polygon(0 0,100% 0,50% 100%);transform-origin:top center;border-radius:12px;transition:transform .5s}
    .env .letter{position:absolute;left:6%;top:8%;right:6%;height:70%;background:white;border-radius:10px;box-shadow:0 6px 20px rgba(0,0,0,.1)}
    .env .heart{position:absolute;left:50%;bottom:-14px;transform:translateX(-50%);width:42px;height:42px;background:var(--heart);clip-path:path("M24 7 C24 -4 7 -4 7 7 C7 12 12 16 24 26 C36 16 41 12 41 7 C41 -4 24 -4 24 7 Z");filter:drop-shadow(0 6px 14px rgba(255,122,162,.5));animation:pulse 1.2s ease-in-out infinite}
    @keyframes pulse{ 0%,100%{transform:translateX(-50%) scale(1)} 50%{transform:translateX(-50%) scale(1.12)} }
    .tap{margin-top:12px;font-weight:700;color:#c74c73;text-shadow:0 1px 0 #fff}

    /* Letter modal */
    dialog{border:none;border-radius:20px;padding:0;box-shadow:0 30px 60px rgba(0,0,0,.25);max-width:min(520px,92vw)}
    .modal{background:#fff;border-radius:20px;overflow:hidden}
    .modal header{padding:16px 18px;background:linear-gradient(90deg,#ffd9e6,#ffe9f1);font-weight:700}
    .modal .content{padding:20px 18px;min-height:160px}
    .modal footer{display:flex;justify-content:flex-end;padding:14px 18px;background:#fff7fb}
    .ghost{background:#0000;border:none}
    .x{padding:10px 14px;border-radius:12px;background:var(--heart);color:white;font-weight:700}

    /* helpers */
    .center{text-align:center}
    .hide{display:none !important}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- STEP 1: PASSWORD CARD -->
    <section id="step1" class="step active">
      <div class="card">
        <h1>üíå Chinn ch√†o b khuyenn <3</h1>
        <p class="muted">Nhap mat khau ne <span style="color:var(--accent)">üß°</span></p>
        <input id="pwd" type="text" inputmode="text" placeholder="Nh·∫≠p v√†o ƒë√¢y" autocomplete="off" />
        <p class="muted">M·∫≠t kh·∫©u ph·∫£i ghi li·ªÅn, kh√¥ng d·∫•u*</p>
        <button id="okBtn" class="btn">ƒê·ªìng √Ω</button>
        <p id="err" class="muted" style="color:#c0392b;display:none;margin-top:8px">M·∫≠t kh·∫©u ch∆∞a ƒë√∫ng r·ªìi n√® ü•∫</p>
      </div>
    </section>

    <!-- STEP 2: ENVELOPE -->
    <section id="step2" class="step">
      <div class="scene">
        <div class="sun"></div>
        <div id="envWrap" class="envelope show">
          <div class="center">
            <div class="env" id="envBtn" role="button" tabindex="0" aria-label="B·∫•m ƒë·ªÉ m·ªü th∆∞">
              <div class="body"></div>
              <div class="flap" id="flap"></div>
              <div class="letter"></div>
              <div class="heart"></div>
            </div>
            <div class="tap">B·∫•m v√†o tr√°i tym</div>
          </div>
        </div>
      </div>
    </section>

    <!-- STEP 3: LETTER (modal) -->
    <dialog id="dlg">
      <div class="modal">
        <header>‚úâÔ∏è G·ª≠i khuyenn siu cap de thuong,</header>
        <div class="content" id="msg">
          tui la duong ne
        </div>
        <footer>
          <button class="ghost" onclick="dlg.close()"></button>
          <button class="x" onclick="dlg.close()">ƒê√≥ng</button>
        </footer>
      </div>
    </dialog>

  </div>
  
  <script>
    // ======= C·∫§U H√åNH NHANH =======
    const PASSWORD = "khuyenndth"; // ƒë·∫∑t m·∫≠t kh·∫©u kh√¥ng d·∫•u, li·ªÅn
    const MESSAGE = `Chinn ch√†o khuyenn minh la duong ne \n\n
    b c√≥ th·∫•y ƒë·ª° h∆°n khongg ????\n\n
    duong th∆∞∆°ng khuyenn l·∫Øm nma l·∫°i ch·∫≥ng gi√∫p ƒë∆∞·ª£c g√¨ :( \n
    m·∫•y ng√†y n√†y khuyenn nh·ªõ u·ªëng n∆∞·ªõc ·∫•m, ch·ªãu kh√≥ ng·ªß s·ªõm nha \n n·∫øu th·∫•y kh√≥ ch·ªãu n√≥i duongg nh√©, duongg xoa gi√∫p khuyenn n√®`;
    const LETTER_TITLE = "‚úâÔ∏è G·ª≠i b khuyenn"; // ti√™u ƒë·ªÅ trong modal

    // g√°n n·ªôi dung ƒë·ªông
    document.getElementById("msg").textContent = MESSAGE;
    document.querySelector(".modal header").textContent = LETTER_TITLE;

    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const ok = document.getElementById('okBtn');
    const err = document.getElementById('err');
    const pwd = document.getElementById('pwd');
    const envBtn = document.getElementById('envBtn');
    const flap = document.getElementById('flap');
    const dlg = document.getElementById('dlg');

    // ti·ªán √≠ch: chu·∫©n h√≥a chu·ªói kh√¥ng d·∫•u, th∆∞·ªùng v√† b·ªè kho·∫£ng tr·∫Øng
    const normalize = s => s
    .toLowerCase()
    .normalize('NFD').replace(/\p{Diacritic}/gu, '')
    .replace(/[ \t]+/g, ' ') // ch·ªâ g·ªôp kho·∫£ng tr·∫Øng v√† tab
    .replace(/\s+\n/g, '\n') // b·ªè kho·∫£ng tr·∫Øng d∆∞ tr∆∞·ªõc xu·ªëng d√≤ng
    .trim();

    console.log(normalize(MESSAGE));
    ok.addEventListener('click', () => {
      const okPwd = normalize(pwd.value) === normalize(PASSWORD);
      if(!okPwd){ err.style.display='block'; return; }
      err.style.display='none';
      // sang b∆∞·ªõc 2 v√† hi·ªán th∆∞ ngay
      step1.classList.remove('active');
      step1.classList.add('hide');
      step2.classList.add('active');
    });

    // enter ƒë·ªÉ x√°c nh·∫≠n
    pwd.addEventListener('keydown', e=>{ if(e.key==='Enter'){ ok.click(); }});

    // m·ªü th∆∞
    const openLetter = () => {
      flap.style.transform = 'rotateX(150deg)';
      setTimeout(()=> dlg.showModal(), 260);
    }
    envBtn.addEventListener('click', openLetter);
    envBtn.addEventListener('keydown', e=>{ if(e.key==='Enter' || e.key===' '){ openLetter(); }});
  </script>
</body>
</html>
